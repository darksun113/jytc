(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["subpageB-MyCards-components-AddCard2-index"],{"220a":function(t,e,n){"use strict";n.r(e);var a=n("718c"),i=n("3e9f");for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("c169");var o=n("f0c5"),s=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"1c246a90",null,!1,a["a"],void 0);e["default"]=s.exports},"2ff0":function(t,e,n){"use strict";(function(t){n("7a82");var a=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("ac1f"),n("00b4");var i=a(n("c7eb")),r=a(n("1da1")),o=n("d990"),s={data:function(){return{requestNo:"",disb:!1,timer:"获取验证码",verifyCode:"",second:0,form:{card_num:"",name:"",id:"",phone:""},historyStr:"",tmp:"",historyName:"",n_tmp:"",bankList:[{name:"工商银行",icon:"../../../../static/bank_images/工商银行.svg"},{name:"建设银行",icon:"../../../../static/bank_images/建设银行.svg"},{name:"民生银行",icon:"../../../../static/bank_images/民生银行.svg"},{name:"光大银行",icon:"../../../../static/bank_images/光大银行.svg"},{name:"浦发银行",icon:"../../../../static/bank_images/浦发银行.svg"},{name:"平安银行",icon:"../../../../static/bank_images/平安银行.svg"},{name:"华夏银行",icon:"../../../../static/bank_images/华夏银行.svg"},{name:"中信银行",icon:"../../../../static/bank_images/中信银行.svg"},{name:"广发银行",icon:"../../../../static/bank_images/广发银行.svg"},{name:"渤海银行",icon:"../../../../static/bank_images/渤海银行.svg"},{name:"浙商银行",icon:"../../../../static/bank_images/浙商银行.svg"},{name:"上海银行",icon:"../../../../static/bank_images/上海银行.svg"}]}},beforeDestroy:function(){this.init()},methods:{idInput:function(t){var e=this;return(0,r.default)((0,i.default)().mark((function n(){var a,r;return(0,i.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=/[0-9]/,r=/[X]/,0!=t.length){n.next=6;break}e.historyStr="",n.next=28;break;case 6:if(e.tmp=t.substr(t.length-1),!(t.length<18)){n.next=19;break}if(!a.test(e.tmp)){n.next=14;break}return n.next=11,t;case 11:e.historyStr=n.sent,n.next=17;break;case 14:return n.next=16,e.historyStr;case 16:e.form.id=n.sent;case 17:n.next=28;break;case 19:if(!a.test(e.tmp)&&!r.test(e.tmp)){n.next=25;break}return n.next=22,t;case 22:e.historyStr=n.sent,n.next=28;break;case 25:return n.next=27,e.historyStr;case 27:e.form.id=n.sent;case 28:case"end":return n.stop()}}),n)})))()},nameInput:function(e){var n=this;return(0,r.default)((0,i.default)().mark((function a(){var r;return(0,i.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=/[\u4e00-\u9fa5]/,0!=e.length){a.next=5;break}n.historyName="",a.next=16;break;case 5:if(n.n_tmp=e.substr(e.length-1),!r.test(n.n_tmp)){a.next=13;break}return a.next=9,e;case 9:n.historyName=a.sent,t.log(n.historyName),a.next=16;break;case 13:return a.next=15,n.historyName;case 15:n.form.name=a.sent;case 16:case"end":return a.stop()}}),a)})))()},init:function(){this.form={card_num:null,name:null,id:null,phone:null,disb:!1}},done:function(){var t=this;return(0,r.default)((0,i.default)().mark((function e(){var n;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.form.code,e.next=4,uni.$http("/payment/signConfirm",{requestNo:t.requestNo,verifyCode:t.verifyCode});case 4:n=e.sent,0==n.code?(uni.showToast({title:"绑定成功",icon:"success"}),t.$routerTo("/subpageB/MyCards/MyCards")):uni.showToast({title:"绑定失败",icon:"error"}),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))()},verify:function(){var e=this;return(0,r.default)((0,i.default)().mark((function n(){var a,r,s,c,u,l,d;return(0,i.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,o.rsaEncrypt)(e.form.card_num);case 3:return a=n.sent,r=e.form.name,n.next=7,(0,o.rsaEncrypt)(e.form.id);case 7:return s=n.sent,n.next=10,(0,o.rsaEncrypt)(e.form.phone);case 10:return c=n.sent,n.next=13,uni.$http("/payment/signProtocol",{bankNo:a,userName:r,idCard:s,phone:c});case 13:u=n.sent,0==u.code?(l=60,e.disb=!0,e.requestNo=u.data.requestNo,uni.showToast({title:"验证码已发送",icon:"success"}),d=setInterval((function(){l--,e.timer=l,e.second=l,e.timer<=0&&(e.disb=!1,e.timer="重新获取",clearInterval(d),t.log(e.second))}),1e3)):e.$toast(u.errorMsg),n.next=20;break;case 17:n.prev=17,n.t0=n["catch"](0),uni.showToast({title:res.errorMsg,icon:"error"});case 20:case"end":return n.stop()}}),n,null,[[0,17]])})))()}}};e.default=s}).call(this,n("5a52")["default"])},"3e9f":function(t,e,n){"use strict";n.r(e);var a=n("2ff0"),i=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},"55d9":function(t,e,n){var a=n("5ce2");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("172b697d",a,!0,{sourceMap:!1,shadowMode:!1})},"5ce2":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* uni.scss */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */hr[data-v-1c246a90]{opacity:.2}.verify-left-u-input[data-v-1c246a90]{padding:%?0?%!important}.main[data-v-1c246a90]{font-size:%?32?%;height:100%;color:#fff;display:flex;flex-direction:column;overflow:auto;font-family:PingFangSC-Regular,sans-serif;box-sizing:border-box;padding:%?146?% %?40?% %?0?% %?40?%}.main .input-form[data-v-1c246a90]{display:flex;flex-direction:column;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;line-height:22px}.main .input-form .line[data-v-1c246a90]{display:flex;padding-top:%?32?%;padding-bottom:%?32?%;border-bottom:%?2?% solid hsla(0,0%,100%,.2)}.main .input-form .line .left[data-v-1c246a90]{width:%?128?%;padding-top:%?10?%}.main .input-form .line .right[data-v-1c246a90]{display:flex;padding-left:%?84?%}.main .input-form .line .right[data-v-1c246a90] .u-form-item__body{padding:%?0?%}.main .input-form .line .right[data-v-1c246a90] .u-input.u-input.u-input--square{padding:%?0?%}.main .input-form .line2[data-v-1c246a90]{display:flex;padding-top:%?38?%;padding-bottom:%?32?%}.main .input-form .line2 .verify-left-input[data-v-1c246a90]{width:%?460?%;padding-bottom:%?40?%;padding-right:%?20?%}.main .input-form .line2 .verify-left-input .verify-left-form-item[data-v-1c246a90]{padding-bottom:%?20?%}.main .input-form .line2 .verify-left-input[data-v-1c246a90] .u-form-item__body{padding:%?0?%}.main .input-form .line2 .verify-left-input[data-v-1c246a90] .u-form-item{padding-top:%?0?%;padding-bottom:%?34?%}.main .input-form .line2 .verify-right[data-v-1c246a90]{font-size:%?32?%;width:%?380?%;height:%?80?%;color:#000;background:#28d8e5;margin-left:%?20?%;padding:%?0?% %?22?% %?20?% %?20?%;border-radius:%?8?%}.main .done-btn[data-v-1c246a90]{color:#000;height:%?88?%;text-align:center;font-weight:500;background:#28d8e5;border-radius:%?8?%;margin-top:%?60?%;padding-top:%?20?%;padding-bottom:%?20?%}.main .bottom[data-v-1c246a90]{display:flex;flex-direction:column;font-size:%?24?%;font-family:SourceHanSansCN-Regular,SourceHanSansCN;font-weight:400;color:#fff;line-height:%?36?%}.main .bottom .bottom-head[data-v-1c246a90]{padding-top:%?180?%;padding-left:%?14?%}.main .bottom .bottom-body[data-v-1c246a90]{width:100%;padding-top:%?40?%;display:flex;flex-wrap:wrap}.main .bottom .bottom-body .items[data-v-1c246a90]{width:25%;display:flex;margin-bottom:%?30?%;justify-content:center}.main .bottom .bottom-body .items .item-icon[data-v-1c246a90]{width:%?34?%;height:%?34?%;background-color:#fff;border-radius:50%}.main .bottom .bottom-body .items .item-icon .the-icon[data-v-1c246a90]{padding:%?4?%;width:%?26?%;height:%?26?%}.main .bottom .bottom-body .items .item-name[data-v-1c246a90]{padding-left:%?10?%}',""]),t.exports=e},"718c":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}));var a={PageTemp:n("92f9").default,"u-Form":n("c90e").default,uFormItem:n("aad0").default,"u-Input":n("2f0b").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("PageTemp",[n("v-uni-view",{staticClass:"main"},[n("u--form",{staticClass:"input-form"},[n("v-uni-view",{staticClass:"line"},[n("v-uni-view",{staticClass:"left"},[t._v("卡号")]),n("v-uni-view",{staticClass:"right"},[n("u-form-item",{ref:"card_num",attrs:{label:"",prop:"card_num"}},[n("u--input",{staticClass:"u-input",attrs:{placeholder:"银行卡卡号",type:"number",suffixIconStyle:"color:#000",color:"#FFFFFF",border:"",clearable:!0},model:{value:t.form.card_num,callback:function(e){t.$set(t.form,"card_num",e)},expression:"form.card_num"}})],1)],1)],1),n("v-uni-view",{staticClass:"line"},[n("v-uni-view",{staticClass:"left"},[t._v("持卡人")]),n("v-uni-view",{staticClass:"right"},[n("u-form-item",{ref:"name",attrs:{label:"",prop:"name"}},[n("u--input",{staticClass:"u-input",attrs:{placeholder:"持卡人姓名",type:"text",suffixIconStyle:"color:#000",color:"#FFFFFF",border:"",clearable:!0},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.nameInput(t.form.name)}},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1)],1),n("v-uni-view",{staticClass:"line"},[n("v-uni-view",{staticClass:"left"},[t._v("身份证号")]),n("v-uni-view",{staticClass:"right"},[n("u-form-item",{ref:"id",attrs:{label:"",prop:"id"}},[n("u--input",{staticClass:"u-input",attrs:{maxlength:"18",placeholder:"持卡人身份证号码",type:"text",suffixIconStyle:"color:#000",color:"#FFFFFF",border:"",clearable:!0},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.idInput(t.form.id)}},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",e)},expression:"form.id"}})],1)],1)],1),n("v-uni-view",{staticClass:"line"},[n("v-uni-view",{staticClass:"left"},[t._v("手机号")]),n("v-uni-view",{staticClass:"right"},[n("u-form-item",{ref:"phone",attrs:{label:"",prop:"phone"}},[n("u--input",{staticClass:"u-input",attrs:{maxlength:"11",placeholder:"银行预留手机号",type:"number",suffixIconStyle:"color:#000",color:"#FFFFFF",border:"",clearable:!0},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1)],1)],1),n("v-uni-view",{staticClass:"line2"},[n("v-uni-view",{staticClass:"verify-left-input"},[n("u-form-item",{ref:"code",staticClass:"verify-left-form-item",attrs:{label:"",prop:"code"}},[n("u--input",{staticClass:"verify-left-u-input",attrs:{placeholder:"请输入验证码",type:"number",suffixIconStyle:"color:#000",color:"#FFFFFF",border:"",clearable:!0},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.input.apply(void 0,arguments)}},model:{value:t.verifyCode,callback:function(e){t.verifyCode=e},expression:"verifyCode"}})],1),n("hr")],1),n("v-uni-button",{staticClass:"verify-right",style:{opacity:t.second?"0.5":"1"},attrs:{disabled:t.disb},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.verify.apply(void 0,arguments)}}},[t._v(t._s(t.second?t.timer+"秒后重新获取":"获取验证码"))])],1)],1),n("v-uni-view",{staticClass:"done-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.done.apply(void 0,arguments)}}},[t._v("完成")]),n("v-uni-view",{staticClass:"bottom"},[n("v-uni-view",{staticClass:"bottom-head"},[n("v-uni-view",{staticClass:"bottom-head-txt"},[t._v("提示：银行卡绑定仅支持下方银行的储蓄卡")])],1),n("v-uni-view",{staticClass:"bottom-body"},t._l(t.bankList,(function(e,a){return n("v-uni-view",{key:a,staticClass:"items"},[n("v-uni-view",{staticClass:"item-icon"},[n("v-uni-image",{staticClass:"the-icon",attrs:{src:e.icon}})],1),n("v-uni-view",{staticClass:"item-name"},[t._v(t._s(e.name))])],1)})),1)],1)],1)],1)},r=[]},c169:function(t,e,n){"use strict";var a=n("55d9"),i=n.n(a);i.a}}]);